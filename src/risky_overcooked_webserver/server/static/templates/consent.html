<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <style>
      img.center {
        display: block;
        margin: 0 auto;
      }
      table, td, th {
        border: 1px solid #ddd;
        text-align: left;
      }

      table {
        border-collapse: collapse;
        width: 100%;
      }

      th, td {
        padding: 15px;
      }
      tr:nth-child(even) {background-color: #f2f2f2;}
    </style>

    <title>Instructions</title>
    <link rel="Favicon" href="static/favicon.ico" />

    <script src="static/lib/jquery-min.js" type="text/javascript"> </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

     <script src="static/js/pretrial.js", type="text/javascript"></script>
      <script src="static/js/utils.js", type="text/javascript"></script>
  </head>
  <body>
    <div class="container">
<!--      <h4 class="text-center"><a href="./">Back to game</a></h4>-->
<!--      <p>-->
<!--        Hello! In this task, you will be playing a-->
<!--        cooking game. You will play one of two chefs-->
<!--        in a restaurant that serves various soups.-->
<!--      </p>-->

      <br>
      <hr>
      <br>

      <h3 class="text-center">Consent</h3>
      <p>
        I am a graduate student under the direction of Professor Wenlong Zhang in the Ira Fulton Schools of Engineering at Arizona State University.
        I am conducting a research study to investigate human-AI interaction in risky settings.
        <br> <br>
        I am inviting your participation, which will involve playing a series of six games taking an estimated 45 minutes to complete.
        The game will be played in your web browser and require both a mouse and keyboard to complete.
        You have the right not to answer any question, and to stop participation at any time.
        <br> <br>
        Your participation in this study is voluntary.
        If you choose not to participate or to withdraw from the study at any time, there will be no penalty.
        For your participation, you will be compensated up to $15 through the Prolific portal based on performance.
        In order to participate, you must be 18 or older.
        <br> <br>
        Your participation will benefit research in interactive AI for the purpose of improving its ability to model and coordinate with humans in risky settings.
        Specifically, your responses to surveys will investigate how human trust in virtual agents developes under different assumptions about behavior.
        Also, the actions you take during the game will help validate and improve robotic understanding of humans.
        After the experiment is complete, further explanation about how the virtual partner modeled your actions is available if you wish to learn more about how you are contributing to this field.
        There are no foreseeable risks or discomforts to your participation.
        <br> <br>
        Responses to all survey questions, participation date, and the actions you take during the game will be collected.
        To protect your privacy, all personal identifiers will be removed from your data and stored on a secure server.
        Your data will be confidential and the de-identified data collected as a part of this study will not be shared
        with others outside of the research team approved by this study’s IRB or be used for future research purposes or other uses.
        The results of this may be used in reports, presentations, or publications but your name will not be used.
        <br> <br>
        If you have any questions concerning the research study, please contact the research team at: mosmith3@asu.edu.
        If you have any questions about your rights as a subject/participant in this research, or if you feel you have been placed at risk, you can contact the Chair of the Human Subjects Institutional Review Board, through the ASU Office of Research Integrity and Assurance, at (480) 965-6788. Please let me know if you wish to be part of the study.
      </p>
      <div class="text-center">
        <button onclick="window.location.href='./';">
            Agree to Participate
        </button>
      </div>


      <br>
      <hr>
      <br>

        <div class="container" id="survey-container">
            <p>survey</p>

        </div>

            <script>

                class RPS_Survey {
    constructor(containerId) {
        this.container = document.getElementById(containerId);
        this.hide();

        this.instructions = "Please indicate the extent to which you agree or disagree with the following statement " +
            "selecting the option you prefer. Please do not think too long before answering; usually your " +
            "first inclination is also the best one."

        this.questions = [
            "Safety first.",
            "I do not take risks with my health.",
            "I prefer to avoid risks.",
            "I take risks regularly.",
            "I really dislike not knowing what is going to happen.",
            "I usually view risks as a challenge.",
            "I view myself as a..."
        ];
        this.scale = [1, 2, 3, 4, 5, 6, 7, 8, 9];
        this.labels = {
            0: ["totally disagree","totally agree"],
            1: ["totally disagree","totally agree"],
            2: ["totally disagree","totally agree"],
            3: ["totally disagree","totally agree"],
            4: ["totally disagree","totally agree"],
            5: ["totally disagree","totally agree"],
            6: ["risk avoider"," risk seeker"]
        };
        this.radio_label_margin = "15px";
        this.question_col_width = "350px";
        this.question_row_height = "30px";
        this.font_size = "14px";
        this.renderSurvey();
    }

    renderSurvey() {
        const instuctionsP = document.createElement("p");
        instuctionsP.textContent = this.instructions;
        this.container.appendChild(instuctionsP);


        const form = document.createElement("form");
        form.style.display = "flex";
        form.style.flexDirection = "column";
        form.style.gap = "10px";

        this.questions.forEach((question, index) => {
            const questionDiv = document.createElement("div");
            questionDiv.classList.add("question");
            questionDiv.style.display = "flex";
            questionDiv.style.alignItems = "center";
            questionDiv.style.justifyContent = "space-between";
            questionDiv.style.padding = "0";
            questionDiv.style.height = this.question_row_height;
            questionDiv.style.fontSize = this.font_size;

            const label = document.createElement("label");
            label.textContent = question;
            label.style.width = this.question_col_width; // Fixed width for the first column
            label.style.textAlign = "right";
            label.style.fontWeight = "bold";
            label.style.padding = "0";
             label.style.margin = "0";
            label.style.marginRight = "10px";
            label.style.fontSize = this.font_size;


            questionDiv.appendChild(label);

            const leftLabel = document.createElement("span");
            leftLabel.textContent = this.labels[index][0];
            leftLabel.style.marginRight = this.radio_label_margin;
            leftLabel.style.padding = "0";
            leftLabel.style.fontSize = this.font_size;
            questionDiv.appendChild(leftLabel);

            const radioGroup = document.createElement("div");
            radioGroup.style.display = "flex";
            radioGroup.style.flexGrow = "1";
            radioGroup.style.justifyContent = "space-between";

            this.scale.forEach((num) => {
                const radioContainer = document.createElement("div");
                radioContainer.style.display = "flex";
                radioContainer.style.flexDirection = "row";
                radioContainer.style.alignItems = "center";
                radioContainer.style.gap = "5px";

                const input = document.createElement("input");
                input.type = "radio";
                input.name = `question_${index}`;
                input.value = num;

                const radioLabel = document.createElement("label");
                radioLabel.textContent = num;
                radioLabel.style.fontSize = this.font_size;
                radioLabel.style.verticalAlign = "middle";
                radioLabel.style.padding = "0";
                radioLabel.style.margin = "0";

                radioContainer.appendChild(input);
                radioContainer.appendChild(radioLabel);
                radioGroup.appendChild(radioContainer);
            });

            questionDiv.appendChild(radioGroup);

            const rightLabel = document.createElement("span");
            rightLabel.textContent = this.labels[index][1];
            rightLabel.style.marginLeft =  this.radio_label_margin;
            rightLabel.style.padding = "0";
            questionDiv.appendChild(rightLabel);

            form.appendChild(questionDiv);
        });
        const submitButton = document.createElement("button");
        submitButton.type = "submit";
        submitButton.textContent = "Submit";
        submitButton.style.marginTop = "20px";
        submitButton.style.alignSelf = "center";
        submitButton.style.padding = "10px 20px";
        submitButton.style.fontSize = "16px";
        submitButton.style.cursor = "pointer";

        form.addEventListener("submit", (event) => {
            event.preventDefault();
            this.submit_callback(form);
        });

        form.appendChild(submitButton);

        this.container.appendChild(form);
    }
    hide() {this.container.style.display = "none";}
    show() {this.container.style.display = "block";}
    clear(form) {
        // clear all radio buttons in form
        const radios = form.querySelectorAll("input[type='radio']");

    }
    submit_callback(form) {
        const formData = new FormData(form);
            const results = {};
            formData.forEach((value, key) => {
                results[key] = value;
            });
            console.log("Survey Results:", results);
            alert("Survey submitted! Check console for results.");
            this.clear(form)
    }
}
class Trust_Survey {
    constructor(containerId) {
        this.container = document.getElementById(containerId);
        this.hide();

        this.instructions = "Please indicate the response to each statement about how you generally feel when interacting with your virtual partner. "
        this.sections = [
            {
                title: "What % of the time will a virtual partner be…",
                questions: ["Dependable", "Reliable", "Unresponsive", "Predictable"]
            },
            {
                title: "What % of the time will my virtual partner…",
                questions: ["Act consistently", "Take too many risks", "Meet the needs of the task", "Perform as expected", "Play too safe"]
            }
        ];
        this.scale = ["0%", "10%", "20%", "30%", "40%", "50%", "60%", "70%", "80%", "90%", "100%"];

        this.question_col_width = "250px";
        this.question_row_height = "20px";
        this.font_size = "14px";
        this.section_font_size = "16px";
        this.renderSurvey();
    }

    renderSurvey() {
        const instuctionsP = document.createElement("p");
        instuctionsP.textContent = this.instructions;
        this.container.appendChild(instuctionsP);

        const form = document.createElement("form");
        form.style.display = "flex";
        form.style.flexDirection = "column";
        form.style.gap = "20px";

        this.sections.forEach((section) => {
            const sectionTitle = document.createElement("h3");
            sectionTitle.textContent = section.title;
            sectionTitle.style.fontWeight = "bold";
            sectionTitle.style.fontSize = this.section_font_size;
            form.appendChild(sectionTitle);

            section.questions.forEach((question, index) => {
                const questionDiv = document.createElement("div");
                questionDiv.classList.add("question");
                questionDiv.style.display = "flex";
                questionDiv.style.alignItems = "center";
                questionDiv.style.justifyContent = "space-between";
                questionDiv.style.height = this.question_row_height; // Fixed height for each row

                const label = document.createElement("label");
                label.textContent = question;
                label.style.width = this.question_col_width; // Fixed width for question text
                label.style.textAlign = "right";
                label.style.fontWeight = "bold";
                label.style.marginRight  = "10px";
                label.style.fontSize = this.font_size;
                questionDiv.appendChild(label);

                const radioGroup = document.createElement("div");
                radioGroup.style.display = "flex";
                radioGroup.style.flexGrow = "1";
                radioGroup.style.justifyContent = "space-between";

                this.scale.forEach((num) => {
                    const radioContainer = document.createElement("div");
                    radioContainer.style.display = "flex";
                    radioContainer.style.flexDirection = "row";
                    radioContainer.style.alignItems = "center";
                    radioContainer.style.gap = "5px";

                    const input = document.createElement("input");
                    input.type = "radio";
                    input.name = `question_${section.title}_${index}`;
                    input.value = num;

                    const radioLabel = document.createElement("label");
                    radioLabel.textContent = num;
                    radioLabel.style.fontSize = this.font_size;
                    radioLabel.style.padding = "0";
                    radioLabel.style.margin = "0";


                    radioContainer.appendChild(input);
                    radioContainer.appendChild(radioLabel);
                    radioGroup.appendChild(radioContainer);
                });

                questionDiv.appendChild(radioGroup);
                form.appendChild(questionDiv);
            });
        });

        const submitButton = document.createElement("button");
        submitButton.type = "submit";
        submitButton.textContent = "Submit";
        submitButton.style.marginTop = "20px";
        submitButton.style.alignSelf = "center";
        submitButton.style.padding = "10px 20px";
        submitButton.style.fontSize = "16px";
        submitButton.style.cursor = "pointer";

        form.addEventListener("submit", (event) => {
            event.preventDefault();
            this.submit_callback(form);
        });

        form.appendChild(submitButton);
        this.container.appendChild(form);
    }
    hide() {this.container.style.display = "none";}
    show() {this.container.style.display = "block";}
    clear() {
        // clear all radio buttons
        const radios = this.container.querySelectorAll("input[type='radio']");
    }
    submit_callback(form) {
        const formData = new FormData(form);
            const results = {};
            formData.forEach((value, key) => {
                results[key] = value;
            });
            console.log("Survey Results:", results);
            alert("Survey submitted! Check console for results.");
            this.clear()
    }
}

const rps_survey = new RPS_Survey("survey-container");
const trust_survey = new Trust_Survey("survey-container");
trust_survey.show()
// Initialize the survey on an element with ID 'survey-container'
// document.addEventListener("DOMContentLoaded", () => {
//     new RPS_Survey("survey-container");
// });
// document.addEventListener("DOMContentLoaded", () => {
//     new Trust_Survey("survey-container");
// });


            </script>


    </div>
  </body>
</html>
